"use strict";(self["webpackChunkv3_admin"]=self["webpackChunkv3_admin"]||[]).push([[729],{2885:function(e,i,n){n.d(i,{Z:function(){return c}});var a=n(6252),s=n(3577),t=n(2262),l=n(5879);const o={style:{"margin-bottom":"15px"}},r={style:{display:"flex","align-items":"center"}},d=(0,a._)("span",null,"切换权限：",-1);var u=(0,a.aZ)({emits:["change"],setup(e,{emit:i}){const n=(0,a.Fl)((()=>l.h.state.user.roles)),u=(0,t.iH)(n.value[0]);return(0,a.YP)(u,(async e=>{await l.h.dispatch("user/changeRoles",e),i("change")})),(e,i)=>{const l=(0,a.up)("el-radio-button"),m=(0,a.up)("el-radio-group");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",o," 你的权限："+(0,s.zw)((0,t.SU)(n)),1),(0,a._)("div",r,[d,(0,a.Wm)(m,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=e=>u.value=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{label:"editor"}),(0,a.Wm)(l,{label:"admin"})])),_:1},8,["modelValue"])])])}}});const m=u;var c=m},4187:function(e,i,n){n.r(i),n.d(i,{default:function(){return A}});var a=n(6252),s=n(2262),t=n(5879);const l=e=>{if(e&&e instanceof Array&&e.length>0){const i=t.h.state.user.roles,n=e;return i.some((e=>n.includes(e)))}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1};var o=n(2885);const r={class:"app-container"},d={class:"permission-alert"},u=(0,a.Uk)(" 只有 "),m=(0,a.Uk)("admin"),c=(0,a.Uk)("可以看见这个 "),p=(0,a.Uk)(" v-permission=\"['admin']\" "),k={class:"permission-alert"},w=(0,a.Uk)(" 只有 "),f=(0,a.Uk)("editor"),g=(0,a.Uk)("可以看见这个 "),v=(0,a.Uk)(" v-permission=\"['editor']\" "),y={class:"permission-alert"},U=(0,a.Uk)(" 两者 "),_=(0,a.Uk)("admin"),h=(0,a.Uk)("和 "),b=(0,a.Uk)("editor"),W=(0,a.Uk)("都可以看见这个 "),C=(0,a.Uk)(" v-permission=\"['admin', 'editor']\" "),j=(0,a.Uk)(" 在某些情况下，不适合使用 v-permission。例如：Element 的 el-tab 或 el-table-column 以及其它动态渲染 dom 的场景。你只能通过手动设置 v-if 来实现。 "),D=(0,a.Uk)(" admin 可以看见这个 "),S=(0,a.Uk)(" v-if=\"checkPermission(['admin'])\" "),x=(0,a.Uk)(" editor 可以看见这个 "),z=(0,a.Uk)(" v-if=\"checkPermission(['editor'])\" "),P=(0,a.Uk)(" 两者 admin 和 editor 都可以看见这个 "),Z=(0,a.Uk)(" v-if=\"checkPermission(['admin', 'editor'])\" ");var q=(0,a.aZ)({setup(e){const i=(0,s.qj)({key:1,handleRolesChange:()=>{i.key++}});return(e,n)=>{const t=(0,a.up)("el-tag"),q=(0,a.up)("el-tab-pane"),R=(0,a.up)("el-tabs"),V=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(o.Z,{onChange:(0,s.SU)(i).handleRolesChange},null,8,["onChange"]),((0,a.wg)(),(0,a.iD)("div",{key:(0,s.SU)(i).key,style:{"margin-top":"30px"}},[(0,a._)("div",null,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",d,[u,(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[m])),_:1}),c])),[[V,["admin"]]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(t,{class:"permission-sourceCode",type:"info",size:"large"},{default:(0,a.w5)((()=>[p])),_:1})),[[V,["admin"]]])]),(0,a._)("div",null,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",k,[w,(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[f])),_:1}),g])),[[V,["editor"]]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(t,{class:"permission-sourceCode",type:"info",size:"large"},{default:(0,a.w5)((()=>[v])),_:1})),[[V,["editor"]]])]),(0,a._)("div",null,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",y,[U,(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[_])),_:1}),h,(0,a.Wm)(t,null,{default:(0,a.w5)((()=>[b])),_:1}),W])),[[V,["admin","editor"]]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(t,{class:"permission-sourceCode",type:"info",size:"large"},{default:(0,a.w5)((()=>[C])),_:1})),[[V,["admin","editor"]]])])])),((0,a.wg)(),(0,a.iD)("div",{key:"checkPermission"+(0,s.SU)(i).key,style:{"margin-top":"60px"}},[(0,a.Wm)(t,{type:"info",size:"large"},{default:(0,a.w5)((()=>[j])),_:1}),(0,a.Wm)(R,{type:"border-card",style:{width:"550px","margin-top":"60px"}},{default:(0,a.w5)((()=>[(0,s.SU)(l)(["admin"])?((0,a.wg)(),(0,a.j4)(q,{key:0,label:"admin"},{default:(0,a.w5)((()=>[D,(0,a.Wm)(t,{class:"permission-sourceCode",type:"info"},{default:(0,a.w5)((()=>[S])),_:1})])),_:1})):(0,a.kq)("",!0),(0,s.SU)(l)(["editor"])?((0,a.wg)(),(0,a.j4)(q,{key:1,label:"editor"},{default:(0,a.w5)((()=>[x,(0,a.Wm)(t,{class:"permission-sourceCode",type:"info"},{default:(0,a.w5)((()=>[z])),_:1})])),_:1})):(0,a.kq)("",!0),(0,s.SU)(l)(["admin","editor"])?((0,a.wg)(),(0,a.j4)(q,{key:2,label:"admin 和 editor"},{default:(0,a.w5)((()=>[P,(0,a.Wm)(t,{class:"permission-sourceCode",type:"info"},{default:(0,a.w5)((()=>[Z])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})]))])}}}),R=n(3744);const V=(0,R.Z)(q,[["__scopeId","data-v-3f4ca904"]]);var A=V}}]);